<!DOCTYPE html>
<html lang="en"

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard CarMiniscaleMarket</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <link rel="stylesheet" href="dashboardstyle.css">
</head>

<body>
    <header>
    <input type="checkbox" name="" id="toggler">
    <nav class="navbar"></nav>
    <label for="toggler" class="fas fa-bars"></label>
    
        <a href="#home" class="logo"><span>CarMiniscaleMarket</span>.</a>

        <nav class="navbar">
            <a href="#home">home</a>
            <a href="#about">about</a>
            <a href="#products">products</a>
        </nav>

        <div class="icons">
            <a href="#cart" class="fas fa-shopping-cart"></a>
            <span class="cart-counter" id="cart-counter">0</span>
        </div>

    </header>

<section class="home" id="home">
    <div class="content">
        <h3>Miniscale Car</h3>
        <span>Detail and Realistic</span>
        <p>A model car, or toy car, is a miniature representation of an automobile. Other miniature motor vehicles, such as trucks, buses, or even ATVs, etc. are often included in this general category.</p>
        <a href="#products" class="btn">shop now</a>
    </div>
</section>

<section class="about" id="about">
    <h1 class="heading"> <span> about </span> product </h1>

<body>
    <div class="about">
        <div class="row">
            <div class="video-container">
                <video src="carvideo.mp4" loop autoplay muted></video>
            </div>
            <div class="content">
                <h3>What is Miniscale?</h3>
                <p>Miniscale diecasts are not classified as toys, but are collectors' items that are not meant to be played with. Where the common type of diecast is essentially a small children's toy in the shape of a car, miniscale diecast is an accurate replica of a real car on a small scale</p>
            </div>
        </div>
    </div>
</body>
</section>

<section class="products" id="products">
    <h1 class="heading"> latest <span>products</span> </h1>

    <div class="box-container">
        
        <div class="products">
            <div class="box">
                <span class="discount">-15%</span>
                <div class="image">
                    <img src="product1.jpg" alt="">
                    <div class="icons">
                        <a href="#cart" class="cart-btn" data-name="LB Works Nissan GT-R Red" data-price="239000">add to cart</a>
                    </div>
                </div>
                <div class="content">
                    <h1>LB Works Nissan GT-R Red</h1>
                    <div class="price"> Rp239.000 <span>Rp299.000</span> </div>
                </div>
            </div>
        </div>

    <div class="products">
        <div class="box">
            <span class="discount">-10%</span>
            <div class="image">
                <img src="product2.jpg" alt="">
                <div class="icons">
                        <a href="#cart" class="cart-btn" data-name="Honda S2000 Mugen Berlina Black" data-price="169000">add to cart</a>
                </div>
            </div>
            <div class="content">
                <h1>Honda S2000 Mugen Berlina Black</h1>
                 <div class="price"> Rp169.000 <span>Rp189.000</span> </div>
             </div>
         </div>
    </div>
  
    <div class="products">
        <div class="box">
            <span class="discount">-10%</span>
            <div class="image">
                <img src="product3.jpg" alt="">
                <div class="icons">
                    <a href="#cart" class="cart-btn" data-name="LB Works Toyota GR Supra JPS" data-price="169000">add to cart</a>
                </div>
            </div>
            <div class="content">
                <h1>LB Works Toyota GR Supra JPS</h1>
                <div class="price"> Rp169.000 <span>Rp189.000</span> </div>
            </div>
        </div>
    </div>

    <div class="products">
        <div class="box">
            <span class="discount">-10%</span>
            <div class="image">
                <img src="product4.jpg" alt="">
                <div class="icons">
                    <a href="#cart" class="cart-btn" data-name="Lamborghini Aventador SVJ Viola Aletheia" data-price="139000">add to cart</a>
                </div>
            </div>
            <div class="content">
                <h1>Lamborghini Aventador SVJ Viola Aletheia</h1>
                <div class="price"> Rp139.000 <span>Rp159.000</span> </div>
            </div>
        </div>
    </div>

    <div class="products">
        <div class="box">
            <span class="discount">-15%</span>
            <div class="image">
                <img src="product5.jpg" alt="">
                <div class="icons">
                    <a href="#cart" class="cart-btn" data-name="Nissan Skyline GT-R Nismo S-Tune Dark Blue" data-price="169000">add to cart</a>
                </div>
            </div>
            <div class="content">
                <h1>Nissan Skyline GT-R Nismo S-Tune Dark Blue</h1>
                <div class="price"> Rp169.000 <span>Rp199.000</span> </div>
            </div>
        </div>
    </div>

    <div class="products">
        <div class="box">
            <span class="discount">-20%</span>
            <div class="image">
                <img src="product6.jpg" alt="">
                <div class="icons">
                    <a href="#cart" class="cart-btn" data-name="2020 Bentley Continental GT3 #7" data-price="179000">add to cart</a>
                </div>
            </div>
            <div class="content">
                <h1>2020 Bentley Continental GT3 #7</h1>
                <div class="price"> Rp179.000 <span>Rp229.000</span> </div>
            </div>
        </div>
    </div>

    <div class="products">
        <div class="box">
            <span class="discount">-10%</span>
            <div class="image">
                <img src="product7.jpg" alt="">
                <div class="icons">
                    <a href="#cart" class="cart-btn" data-name="Ford Shelby GT500 Dragonsnake Concept" data-price="139000">add to cart</a>
                </div>
            </div>
            <div class="content">
                <h1>Ford Shelby GT500 Dragonsnake Concept</h1>
                <div class="price"> Rp139.000 <span>Rp159.000</span> </div>
            </div>
        </div>
    </div>

    <div class="products">
        <div class="box">
            <span class="discount">-15%</span>
            <div class="image">
                <img src="product8.jpg" alt="">
                <div class="icons">
                    <a href="#cart" class="cart-btn" data-name="Porsche 911 Targa 4S White" data-price="129000">add to cart</a>
                </div>
            </div>
            <div class="content">
                <h1>Porsche 911 Targa 4S White</h1>
                <div class="price"> Rp129.000 <span>Rp159.000</span> </div>
            </div>
        </div>
    </div>

    <div class="products">
        <div class="box">
            <span class="discount">-10%</span>
            <div class="image">
                <img src="product9.jpg" alt="">
                <div class="icons">
                    <a href="#cart" class="cart-btn" data-name="Ford GT LMGTE Pro #68" data-price="149000">add to cart</a>
                </div>
            </div>
            <div class="content">
                <h1>Ford GT LMGTE Pro #68</h1>
                <div class="price"> Rp149.000 <span>Rp179.000</span> </div>
            </div>
        </div>
    </div>

</section>

<section class="cart" id="cart">
    <h1 class="heading">Shopping <span>Cart</span></h1>
    <div class="cart-container">
        <div id="cart-items" class="cart-items"></div>
        <div class="total-price">Total: Rp <span id="total-price">0</span></div>
    </div>
    <div class="checkout-container">
        <form id="checkout-form" class="checkout-form">
            <input type="text" id="name" placeholder="Name" required><br>
            <input type="email" id="email" placeholder="Email" required><br>
            <input type="text" id="address" placeholder="Address" required><br>
            <button type="submit" class="checkout-btn">Checkout</button>
        </form>
    </div>
</section>


<script>
    const cart = JSON.parse(localStorage.getItem('cart')) || [];

    document.addEventListener('DOMContentLoaded', () => {

        

        function saveCart() {
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        function updateCartCounter() {
            const cartCounter = document.getElementById('cart-counter');
            cartCounter.innerText = cart.reduce((acc, item) => acc + item.quantity, 0);
        }

        function calculateTotalPrice() {
            return cart.reduce((acc, item) => acc + item.price * item.quantity, 0);
        }

        function updateCartDisplay() {
            const cartItemsContainer = document.getElementById('cart-items');
            cartItemsContainer.innerHTML = '';
            cart.forEach(item => {
                const cartItem = document.createElement('div');
                cartItem.classList.add('cart-item');
                cartItem.innerHTML = `
                    <h3>${item.name}</h3>
                    <p>Price: Rp${item.price.toLocaleString()}</p>
                    <p>Quantity: <input type="number" min="1" value="${item.quantity}" data-name="${item.name}"></p>
                    <button class="remove-btn" data-name="${item.name}">Remove</button>
                `;
                cartItemsContainer.appendChild(cartItem);

                cartItem.querySelector('input').addEventListener('change', (event) => {
                    const newQuantity = parseInt(event.target.value, 10);
                    updateQuantity(item.name, newQuantity);
                });

                cartItem.querySelector('.remove-btn').addEventListener('click', () => {
                    dequeueCartItem(item.name);
                });
            });
            const totalPrice = calculateTotalPrice();
            document.getElementById('total-price').innerText = totalPrice.toLocaleString();
        }

        // Queue method
        function enqueueCartItem(name, price) {
            const existingItem = cart.find(item => item.name === name);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ name, price, quantity: 1 });
            }
            saveCart();
            updateCartDisplay();
            updateCartCounter();
        }
        
        // Queue method
        function dequeueCartItem(name) {
            const itemIndex = cart.findIndex(item => item.name === name);
            if (itemIndex !== -1) {
                cart.splice(itemIndex, 1);
            }
            saveCart();
            updateCartDisplay();
            updateCartCounter();
        }

        function updateQuantity(name, quantity) {
            const item = cart.find(item => item.name === name);
            if (item) {
                item.quantity = quantity;
            }
            saveCart();
            updateCartDisplay();
            updateCartCounter();
        }

        document.querySelectorAll('.cart-btn').forEach(button => {
            button.addEventListener('click', () => {
                const name = button.dataset.name;
                const price = parseInt(button.dataset.price);
                enqueueCartItem(name, price);
            });
        });

        document.getElementById('checkout-form').addEventListener('submit', (event) => {
            event.preventDefault();
            if (cart.length === 0) {
                alert('Please add items to the cart before proceeding to checkout.');
                return;
            }
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const address = document.getElementById('address').value;
            confirmOrder(name, email, address);
        });

        function confirmOrder(name, email, address) {
            
            let orderDetails = 'Order Details:\n';
            cart.forEach(item => {
                orderDetails += `${item.name} - Quantity: ${item.quantity} - Price: Rp${item.price.toLocaleString()}\n`;
            });
            const totalPrice = calculateTotalPrice();
            orderDetails += `Total Price: Rp${totalPrice.toLocaleString()}\n\n`;
            orderDetails += `Customer Info:\nName: ${name}\nEmail: ${email}\nAddress: ${address}\n`;

            const params = new URLSearchParams({
                name: name,
                email: email,
                address: address,
                cart: JSON.stringify(cart),
                totalPrice: totalPrice
            });

            window.location.href = `invoice.php?${params.toString()}`;

            localStorage.removeItem('cart');
            cart.length = 0;
            updateCartDisplay();
            updateCartCounter();
            document.getElementById('checkout-form').reset();
        }

    });
</script>


<section class="footer">
    <div class="box-container">
        <div class="box">
            <h3>quick links</h3>
            <a href="#home">home</a>
            <a href="#about">about</a>
            <a href="#products">products</a>
        </div>
        <div class="box">
            <h3>extra links</h3>
            <a href="#cart">my order</a>
        </div>
        <div class="box">
            <h3>Locations</h3>
            <a href="#">Indonesia</a>
        </div>
        <div class="box">
            <h3>contact info</h3>
            <a href="#">+62-1234-5678-901</a>
            <a href="#">carminiscale@gmail.com</a>
            <a href="#">Semarang, Indonesia - 50271 </a>
            <img src="payment.jpg" alt="Payment Methods">
        </div>
    </div>
    <div class="credit"> created by <span>Janottama Ale Prasetyo</span> | all rights reserved | </div>
</section>

</body>
